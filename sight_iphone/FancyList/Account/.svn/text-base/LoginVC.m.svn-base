//
//  LoginVC.m
//  sight_iphone
//
//  Created by fengshaobo on 15/4/22.
//  Copyright (c) 2015年 fengshaobo. All rights reserved.
//

#import "LoginVC.h"
#import "LoginResult.h"
#import "TListVC.h"
#import "ForgetPassworkVC.h"

@interface LoginVC ()

@end

@implementation LoginVC

- (void)viewDidLoad {
    [super viewDidLoad];

    // step1 : 重设frame
    CGRect rect = self.view.frame;
    [[NSBundle mainBundle] loadNibNamed:@"LoginVC" owner:self options:nil];
    self.view.frame = rect;
    
    // step2: navbar
    [self layoutRootViewDefault:self.view];
    [naviBar setTitle:@"登录"];
    [self stopLoading:YES];
    
    NaviBarItem *backItem = [[NaviBarItem alloc] initBackItem:self action:@selector(goBack:)];
    [naviBar setLeftBarItem:backItem];

    [viewContent addSubview:self.bgView];
    
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)loginAction:(UIButton *)sender
{
//    NSString *email = self.emailTf.text;
//    NSString *passwork = self.passwordTf.text;
//    
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    [dict setObjectSafe:@"xib检测" forKey:@"title"];
    [dict setObjectSafe:@"this is a test" forKey:@"content"];
    [dict setObjectSafe:@"123111" forKey:@"time"];
    [dict setObjectSafe:@"5" forKey:@"mind"];

    [[NetworkAPI sharedInstance] apiGet:@"/data/create.php" withParam:dict respondData:[[LoginResult alloc] init] result:^(APIStatus status, id data, AFHTTPRequestOperation *operation) {
        if (ELoading == status) {
            
        }
        else if (ESuccess == status) {
            NSInteger code = [[[data networkStatus] returnCode] integerValue];
            if (1 == code) {

            }
        }
        else if (EFailure == status) {
            
        }
    }];
    
    
    TListVC *listVC = [[TListVC alloc] initWithName:kTListVC];
    [[VCManager mainVCC] pushVC:listVC WithAnimation:[VCAnimationClassic defaultAnimation]];
}

- (IBAction)frogetPassworkAction:(UIButton *)sender
{
    ForgetPassworkVC *forgetPasswordlVC = [[ForgetPassworkVC alloc] initWithName:kForgetPassworkVC];
    [[VCManager mainVCC] pushVC:forgetPasswordlVC WithAnimation:[VCAnimationClassic defaultAnimation]];
}

@end
